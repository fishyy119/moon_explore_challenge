# path_msgs

>  最后编辑日期：2025-07-22

该包是路径规划相关的通信接口定义包，提供路径规划算法所需的 ROS 消息与服务数据结构。由于 `colcon` 构建系统不支持在同一包中混合构建 Python 节点与自定义消息，因此将消息定义单独拆分为该独立包。

---

## 消息定义

### [`HPath.msg`](msg/HPath.msg)

自定义路径消息，描述混合 A* 算法规划得到的路径信息：

| 字段名       | 类型                     | 描述                                                         |
| ------------ | ------------------------ | ------------------------------------------------------------ |
| `poses`      | `geometry_msgs/Pose2D[]` | 在路径上以一定步长采样得到的路径点序列，每个点描述了车辆后轴中心的xy坐标与车辆自身的偏航角 |
| `directions` | `bool[]`                 | 相邻路径段的运动方向（`true` 为前进，`false` 为后退）        |

- 两个列表的长度相等，一一对应
- 路径采样步长由配置项 `MOTION_RESOLUTION` 决定

---


### [`CandidatePose2D.msg`](msg/CandidatePose2D.msg)

候选位姿评分消息，用于探索类规划算法中表示一个候选姿态及其质量评分。

| 字段名     | 类型                     | 描述                  |
| ------- | ---------------------- | ------------------- |
| `pose`  | `geometry_msgs/Pose2D` | 候选点位姿             |
| `score` | `float32`              | 评分，物理意义为路径长度，越小越好 |

---

## 服务定义

### [`PathPlanning.srv`](srv/PathPlanning.srv)

路径规划服务接口，允许外部请求规划从起点到终点的路径。

#### 请求参数

| 字段名  | 类型                   | 描述                               |
| ------- | ---------------------- | ---------------------------------- |
| `start` | `geometry_msgs/Pose2D` | 起点位姿，包括 `x`、`y` 和 `theta` |
| `goal`  | `geometry_msgs/Pose2D` | 终点位姿，包括 `x`、`y` 和 `theta` |

- 此处参考点与前面相同，是车辆后轴中心的xy坐标

#### 响应参数

| 字段名    | 类型              | 描述           |
| --------- | ----------------- | -------------- |
| `path`    | `path_msgs/HPath` | 规划得到的路径 |
| `success` | `bool`            | 是否规划成功   |
| `reason`  | `string`          | 错误文本信息   |

---

### [`ExplorePlanning.srv`](srv/ExplorePlanning.srv)

探索式候选点规划服务，用于生成多个位姿候选及其评分，便于后续进行多策略评估。

#### 请求参数

| 字段名     | 类型                     | 描述                        |
| ------- | ---------------------- | ------------------------- |
| `start` | `geometry_msgs/Pose2D` | 起点位姿，包括 `x`、`y` 和 `theta` |
| `goal`  | `geometry_msgs/Pose2D` | 终点位姿，包括 `x`、`y` 和 `theta` |

#### 响应参数

| 字段名       | 类型                          | 描述                                   |
| ------------ | ----------------------------- | -------------------------------------- |
| `candidates` | `path_msgs/CandidatePose2D[]` | 输出未被障碍物遮挡的候选目标点及其评分 |

